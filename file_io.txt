Network메Working메Group메S.메Hanks메Request메for메Comments메:메1702메NetSmiths메,메Ltd.메Category메:메Informational메T.메Li메D.메Farinacci메P.메Traina메cisco메Systems메October메1994메Generic메Routing메Encapsulation메over메IPv4메networks메Status메of메this메Memo메This메memo메provides메information메for메the메Internet메community메.메This메memo메does메not메specify메an메Internet메standard메of메any메kind메.메Distribution메of메this메memo메is메unlimited메.메Introduction메In메an메earlier메memo메[메RFC메1701메]메,메we메described메GRE메,메a메mechanism메for메encapsulating메arbitrary메packets메within메an메arbitrary메transport메protocol메.메This메is메a메companion메memo메which메describes메the메use메of메GRE메with메IP메.메This메memo메addresses메the메case메of메using메IP메as메the메delivery메protocol메or메the메payload메protocol메and메the메special메case메of메IP메as메both메the메delivery메and메payload메.메This메memo메also메describes메using메IP메addresses메and메autonomous메system메numbers메as메part메of메a메GRE메source메route메.메IP메as메a메delivery메protocol메GRE메packets메which메are메encapsulated메within메IP메will메use메IP메protocol메type메47메.메IP메as메a메payload메protocol메IP메packets메will메be메encapsulated메with메a메Protocol메Type메field메of메0x800메.메For메the메Address메Family메value메of메0x800메,메the메Routing메Information메field메will메consist메of메a메list메of메IP메addresses메and메indicates메an메IP메source메route메.메The메first메octet메of메the메Routing메Information메field메constitute메a메8메bit메integer메offset메from메the메start메of메the메Source메Route메Entry메(메SRE메)메,메called메the메SRE메Offset메.메The메SRE메Offset메indicates메the메first메octet메of메the메next메IP메address메.메The메SRE메Length메field메consists메of메the메total메length메of메the메IP메Address메List메in메octets메.메This메has메the메form메:메0메1메2메3메0메1메2메3메4메5메6메7메8메9메0메1메2메3메4메5메6메7메8메9메0메1메2메3메4메5메6메7메8메9메0메1메+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+메|메Address메Family메|메SRE메Offset메|메SRE메Length메|메+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+메|메IP메Address메List메...메+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+메For메the메Address메Family메value메of메0xfffe메,메the메Routing메Information메field메will메consist메of메a메list메of메Autonomous메System메numbers메and메indicates메an메AS메source메route메.메The메third메octet메of메the메Routing메Information메field메contains메an메8메bit메unsigned메integer메offset메from메the메start메of메the메Source메Route메Entry메(메SRE메)메,메called메the메SRE메Offset메.메The메SRE메Offset메indicates메the메first메octet메of메the메next메AS메number메.메THe메SRE메Length메field메consists메of메the메total메length메of메the메AS메Number메list메in메octets메.메0메1메2메3메0메1메2메3메4메5메6메7메8메9메0메1메2메3메4메5메6메7메8메9메0메1메2메3메4메5메6메7메8메9메0메1메+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+메|메Address메Family메|메SRE메Offset메|메SRE메Length메|메+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+메|메AS메Number메List메...메+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+메IP메as메both메delivery메and메payload메protocol메When메IP메is메encapsulated메in메IP메,메the메TTL메,메TOS메,메and메IP메security메options메MAY메be메copied메from메the메payload메packet메into메the메same메fields메in메the메delivery메packet메.메The메payload메packet메's메TTL메MUST메be메decremented메when메the메packet메is메decapsulated메to메insure메that메no메packet메lives메forever메.메IP메source메routes메When메a메system메is메processing메a메SRE메with메an메Address메Family메indicating메an메IP메source메route메,메it메MUST메use메the메SRE메Offset메to메determine메the메next메destination메IP메address메.메If메the메next메IP메destination메is메this메system메,메the메SRE메Offset메field메should메be메increased메by메four메(메the메size메of메an메IP메address메)메.메If메the메SRE메Offset메is메equal메to메the메SRE메Length메in메this메SRE메,메then메the메Offset메field메in메the메GRE메header메should메be메adjusted메to메point메to메the메next메SRE메(메if메any메)메.메This메should메be메repeated메until메the메next메IP메destination메is메not메this메system메or메until메the메entire메SRE메has메been메processed메.메If메the메source메route메is메incomplete메,메then메the메Strict메Source메Route메bit메is메checked메.메If메the메source메route메is메a메strict메source메route메and메the메next메IP메destination메is메NOT메an메adjacent메system메,메the메packet메MUST메be메dropped메.메Otherwise메,메the메system메should메use메the메IP메address메indicated메by메the메Offset메field메to메replace메the메destination메address메in메the메delivery메header메and메forward메the메packet메.메Autonomous메system메source메routes메When메a메system메is메processing메a메SRE메with메an메Address메Family메indicating메an메AS메source메route메,메it메MUST메use메the메SRE메Offset메field메to메determine메the메next메autonomous메system메.메If메the메next메autonomous메system메is메the메local메autonomous메system메,메the메SRE메Offset메field메should메be메increased메by메two메(메the메size메of메an메autonomous메system메number메)메.메If메the메SRE메Offset메is메equal메to메the메SRE메Length메in메this메SRE메,메then메the메Offset메field메in메the메GRE메header메should메be메adjusted메to메point메to메the메next메SRE메(메if메any메)메.메This메should메be메repeated메until메the메next메autonomous메system메number메is메not메equal메to메the메local메autonomous메system메number메or메until메the메entire메SRE메has메been메processed메.메If메the메source메route메is메incomplete메,메then메the메Strict메Source메Route메bit메is메checked메.메If메the메source메route메is메a메strict메source메route메and메the메next메autonomous메system메is메NOT메an메adjacent메autonomous메system메,메the메packet메should메be메dropped메.메Otherwise메,메the메system메should메use메the메autonomous메system메number메indicated메by메the메SRE메Offset메field메to메replace메the메destination메address메in메the메delivery메header메and메forward메the메packet메.메The메exact메mechanism메for메determining메the메next메delivery메destination메address메given메the메AS메number메is메outside메of메the메scope메of메this메document메.메Security메Considerations메Security메issues메are메not메discussed메in메this메memo메.메Authors메'메Addresses메Stan메Hanks메NetSmiths메,메Ltd.메2025메Lincoln메Highway메Edison메,메NJ메08817메EMail메:메stan메@메netsmiths.com메Tony메Li메cisco메Systems메,메Inc.메1525메O'Brien메Drive메Menlo메Park메,메CA메94025메EMail메:메tli메@메cisco.com메Dino메Farinacci메cisco메Systems메,메Inc.메1525메O'Brien메Drive메Menlo메Park메,메CA메94025메EMail메:메dino메@메cisco.com메Paul메Traina메cisco메Systems메,메Inc.메1525메O'Brien메Drive메Menlo메Park메,메CA메94025메EMail메:메pst메@메cisco.com메References메RFC메1701메Hanks메,메S.메,메Li메,메T메,메Farinacci메,메D.메,메and메P.메Traina메,메``메Generic메Routing메Encapsulation메''메,메RFC메1701메,메NetSmiths메,메Ltd.메,메and메cisco메Systems메,메October메1994메.